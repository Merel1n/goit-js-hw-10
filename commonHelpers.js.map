{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport imageUrl from '../img/symbol-defs.svg';\n\nconst refs = {\n  dateTime: document.querySelector('#datetime-picker'),\n  button: document.querySelector('[data-start]'),\n  timer: {\n    dataDays: document.querySelector('[data-days]'),\n    dataHours: document.querySelector('[data-hours]'),\n    dataMinutes: document.querySelector('[data-minutes]'),\n    dataSeconds: document.querySelector('[data-seconds]'),\n  },\n};\nlet userSelectedDate;\nlet initTimeId;\nrefs.button.disabled = true;\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < Date.now()) {\n      iziToast.show({\n        title: 'ERROR',\n        message: 'Please choose a date in the future',\n        backgroundColor: '#ef4040',\n        titleColor: '#fff',\n        titleSize: '16px',\n        messageColor: '#fff',\n        messageSize: '16px',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n        iconUrl: imageUrl,\n        iconColor: '#FAFAFB',\n        imageWidth: 302,\n        theme: 'dark',\n      });\n    } else {\n      userSelectedDate = selectedDates[0];\n      refs.button.disabled = false;\n    }\n  },\n});\nrefs.button.addEventListener('click', () => {\n  refs.button.disabled = true;\n  refs.dateTime.disabled = true;\n  initTimeId = setInterval(() => {\n    const currentTime = Date.now();\n\n    const diff = userSelectedDate - currentTime;\n    const time = convertMs(diff);\n    const str = getTime(time);\n  }, 1000);\n  setTimeout(() => {\n    clearInterval(initTimeId);\n  }, userSelectedDate - Date.now());\n});\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction getTime({ days, hours, minutes, seconds }) {\n  days = days.toString().padStart(2, '0');\n  hours = hours.toString().padStart(2, '0');\n  minutes = minutes.toString().padStart(2, '0');\n  seconds = seconds.toString().padStart(2, '0');\n\n  return `${(refs.timer.dataDays.textContent =\n    days)},${(refs.timer.dataHours.textContent =\n    hours)}:${(refs.timer.dataMinutes.textContent =\n    minutes)}:${(refs.timer.dataSeconds.textContent = seconds)}`;\n}\n"],"names":["refs","userSelectedDate","initTimeId","flatpickr","selectedDates","iziToast","imageUrl","currentTime","diff","time","convertMs","getTime","ms","days","hours","minutes","seconds"],"mappings":"gJAMA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,kBAAkB,EACnD,OAAQ,SAAS,cAAc,cAAc,EAC7C,MAAO,CACL,SAAU,SAAS,cAAc,aAAa,EAC9C,UAAW,SAAS,cAAc,cAAc,EAChD,YAAa,SAAS,cAAc,gBAAgB,EACpD,YAAa,SAAS,cAAc,gBAAgB,CACrD,CACH,EACA,IAAIC,EACAC,EACJF,EAAK,OAAO,SAAW,GACvBG,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,KAAK,IAAG,EAC7BC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,gBAAiB,UACjB,WAAY,OACZ,UAAW,OACX,aAAc,OACd,YAAa,OACb,iBAAkB,UAClB,SAAU,WACV,QAASC,EACT,UAAW,UACX,WAAY,IACZ,MAAO,MACf,CAAO,GAEDL,EAAmBG,EAAc,CAAC,EAClCJ,EAAK,OAAO,SAAW,GAE1B,CACH,CAAC,EACDA,EAAK,OAAO,iBAAiB,QAAS,IAAM,CAC1CA,EAAK,OAAO,SAAW,GACvBA,EAAK,SAAS,SAAW,GACzBE,EAAa,YAAY,IAAM,CAC7B,MAAMK,EAAc,KAAK,MAEnBC,EAAOP,EAAmBM,EAC1BE,EAAOC,EAAUF,CAAI,EACfG,EAAQF,CAAI,CACzB,EAAE,GAAI,EACP,WAAW,IAAM,CACf,cAAcP,CAAU,CACzB,EAAED,EAAmB,KAAK,IAAG,CAAE,CAClC,CAAC,EACD,SAASS,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASL,EAAQ,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAClD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAErC,GAAIhB,EAAK,MAAM,SAAS,YAC7Ba,CAAM,IAAIb,EAAK,MAAM,UAAU,YAC/Bc,CAAO,IAAId,EAAK,MAAM,YAAY,YAClCe,CAAO,IAAMf,EAAK,MAAM,YAAY,YAAcgB,CAAO,EAC7D"}